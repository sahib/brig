<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Frequently Asked Questions &#8212; brig v0.4.0-beta
 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Features" href="features.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          brig</a>
        <span class="navbar-text navbar-version pull-left"><b>v0.4.0-beta
</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/sahib/brig">GitHub</a></li>
                <li><a href="https://travis-ci.org/sahib/brig">Build Status</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Installation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html#compiling-yourself">Compiling yourself</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#step-0-installing-go">Step 0: Installing Go</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#step-1-compile-install-brig">Step 1: Compile &amp; Install <code class="docutils literal notranslate"><span class="pre">brig</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#step-2-test-if-the-installation-is-working">Step 2: Test if the installation is working</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html#setting-up-ipfs">Setting up IPFS</a></li>
</ul>
<p class="caption"><span class="caption-text">User manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial/intro.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/intro.html#precursor-the-help-system">Precursor: The help system</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/init.html">Creating a repository</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/init.html#passwords">Passwords</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/init.html#choosing-and-finding-names">Choosing and finding names</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/init.html#running-the-daemon-and-viewing-logs">Running the daemon and viewing logs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/init.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/init.html#using-several-repositories-in-parallel">Using several repositories in parallel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/coreutils.html">Adding &amp; Viewing files</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/coreutils.html#coreutils">Coreutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/mounts.html">Mounting repositories</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/mounts.html#making-mounts-permanent">Making mounts permanent</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/remotes.html">Remotes</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/remotes.html#syncing">Syncing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/remotes.html#data-retrieval">Data retrieval</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/remotes.html#partial-synchronisation">Partial synchronisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/remotes.html#automatic-updating">Automatic Updating</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/pinning.html">Pinning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/pinning.html#garbage-collection">Garbage collection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/vcs.html">Version control</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/vcs.html#key-concepts">Key concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/vcs.html#commits">Commits</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/vcs.html#file-history">File history</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/vcs.html#viewing-differences">Viewing differences</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/vcs.html#reverting-to-previous-state">Reverting to previous state</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/gateway.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/gateway.html#using-the-gateway">Using the gateway</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/gateway.html#securing-access">Securing access</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/gateway.html#running-the-gateway-with-https">Running the gateway with HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/gateway.html#redirecting-http-traffic">Redirecting HTTP traffic</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/config.html">Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#init">1. Init</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#adding-files">2. Adding files</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#coreutils">3. Coreutils</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#mounting">4. Mounting</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#commits">5. Commits</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#history">6. History</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#discovery-remotes">7. Discovery &amp; Remotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#sync-diff">8. Sync &amp; Diff</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#pinning">9. Pinning</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-questions">General questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#technical-questions">Technical questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison.html">Comparison with other tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#current-state">Current state</a></li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#future">Future</a></li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#far-future">Far Future</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">How to contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#what-to-improve">What to improve</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#workflow">Workflow</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Frequently Asked Questions</a><ul>
<li><a class="reference internal" href="#general-questions">General questions</a><ul>
<li><a class="reference internal" href="#why-is-the-software-named-brig">1. Why is the software named <code class="docutils literal notranslate"><span class="pre">brig</span></code>?</a></li>
<li><a class="reference internal" href="#who-develops-it">2. Who develops it?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#technical-questions">Technical questions</a><ul>
<li><a class="reference internal" href="#how-is-the-encryption-working">1. How is the encryption working?</a></li>
<li><a class="reference internal" href="#is-there-compression-implemented">2. Is there compression implemented?</a></li>
<li><a class="reference internal" href="#what-hash-algorithms-are-used">3. What hash algorithms are used?</a></li>
<li><a class="reference internal" href="#what-kind-of-deduplication-is-currently-used">4. What kind of deduplication is currently used?</a></li>
<li><a class="reference internal" href="#how-fast-is-the-i-o-when-using-brig">5. How fast is the I/O when using <code class="docutils literal notranslate"><span class="pre">brig</span></code>?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/faq.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">Â¶</a></h1>
<div class="section" id="general-questions">
<h2>General questions<a class="headerlink" href="#general-questions" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="why-is-the-software-named-brig">
<h3>1. Why is the software named <code class="docutils literal notranslate"><span class="pre">brig</span></code>?<a class="headerlink" href="#why-is-the-software-named-brig" title="Permalink to this headline">Â¶</a></h3>
<p>It is named after the ship with the same name.
When we named it, we thought itâ€™s a good name for the following reason:</p>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">brig</span></code> is a very lightweight and fast ship.</li>
<li>It was commonly used to transport small amount of goods.</li>
<li>A ship operates on streams (sorry ðŸ˜›)</li>
<li>The name is short and somewhat similar to <code class="docutils literal notranslate"><span class="pre">git</span></code>.</li>
<li>It gives you a few nautical metaphors and a logo for free.</li>
<li>Words like Â»brightÂ«, Â»brigadeÂ« and many others start with it</li>
</ul>
<p>Truth be told, only half of the two name givers thought itâ€™s a good name, but
I still kinda like it.</p>
</div>
<div class="section" id="who-develops-it">
<h3>2. Who develops it?<a class="headerlink" href="#who-develops-it" title="Permalink to this headline">Â¶</a></h3>
<p>Although this documentation sometimes speaks of Â»weÂ«, the only developer is
currently <a class="reference external" href="https://github.com/sahib">Chris Pahl</a>. He writes it entirely in
his free time, mostly during commuting with the train.</p>
</div>
</div>
<div class="section" id="technical-questions">
<h2>Technical questions<a class="headerlink" href="#technical-questions" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="how-is-the-encryption-working">
<h3>1. How is the encryption working?<a class="headerlink" href="#how-is-the-encryption-working" title="Permalink to this headline">Â¶</a></h3>
<p>A stream is chunked into equal sized blocks that are encrypted in GCM mode
using AES-256. Additionally ChaCha20 (with Poly1305) is currently supported but
it might be removed soon. The overall file format is somewhat similar to NaCL
secretboxes, but it is more tailored to supporting efficient seeking.</p>
<p>The current default is <code class="docutils literal notranslate"><span class="pre">ChaCha20</span></code>, although machines with the <code class="docutils literal notranslate"><span class="pre">aes-ni</span></code>
instruction set might yield significant higher throughput. The source of the
<a class="reference external" href="https://github.com/sahib/brig/tree/master/catfs/mio/encrypt">encryption layer can be found here</a>.
Hereâ€™s a basic overview over the format:</p>
<a class="reference internal image-reference" href="_images/format-encryption.svg"><div align="center" class="align-center"><img alt="_images/format-encryption.svg" src="_images/format-encryption.svg" width="66%" /></div>
</a>
<p>The key of each file is currently being derived from the content hash of the
file (See also <a class="reference external" href="https://en.wikipedia.org/wiki/Convergent_encryption">Convergent Encryption</a>). If the content
changes later, the key does not change since the key is only generated once
during the first staging of the file.</p>
<p>Please refer to the implementation for all implementation details for now. No
security audits of the implementation have been done yet, therefore Iâ€™d
appreciate every pair of eyes. Especially while everything is still in flux and
wonâ€™t harm any users.</p>
</div>
<div class="section" id="is-there-compression-implemented">
<h3>2. Is there compression implemented?<a class="headerlink" href="#is-there-compression-implemented" title="Permalink to this headline">Â¶</a></h3>
<p>Yes. The compression is being done before encryption and is only enabled if the
file looks compression-worthy. The Â»worthinessÂ« is determined by looking at its
header to guess a mime-type. Depending on the mime-type either <code class="docutils literal notranslate"><span class="pre">snappy</span></code> or
<code class="docutils literal notranslate"><span class="pre">lz4</span></code> is selected or no compression is added at all.</p>
<p>The source of the <a class="reference external" href="https://github.com/sahib/brig/tree/master/catfs/mio/compress">compression layer can be found here</a>. Hereâ€™s
a basic overview over the format:</p>
<a class="reference internal image-reference" href="_images/format-compression.svg"><div align="center" class="align-center"><img alt="_images/format-compression.svg" src="_images/format-compression.svg" width="66%" /></div>
</a>
</div>
<div class="section" id="what-hash-algorithms-are-used">
<h3>3. What hash algorithms are used?<a class="headerlink" href="#what-hash-algorithms-are-used" title="Permalink to this headline">Â¶</a></h3>
<p>Two algorithms are used:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">SHA256</span></code> is used by <code class="docutils literal notranslate"><span class="pre">IPFS</span></code> for every backend hash.</li>
<li><code class="docutils literal notranslate"><span class="pre">SHA3-256</span></code> is used as general purpose hash for everything <code class="docutils literal notranslate"><span class="pre">brig</span></code> internal
(Content and Tree hash).</li>
</ul>
<p>Each hash is encoded as <a class="reference external" href="https://github.com/multiformats/multihash">multihash</a>. For output purposes this
representation is encoded additionally in <code class="docutils literal notranslate"><span class="pre">base58</span></code>. Therefore, all hashes
that start with <code class="docutils literal notranslate"><span class="pre">W1</span></code> are <code class="docutils literal notranslate"><span class="pre">sha3-256</span></code> hashes while the ones starting with
<code class="docutils literal notranslate"><span class="pre">Qm</span></code> are <code class="docutils literal notranslate"><span class="pre">sha256</span></code> hashes. Keep in mind that <code class="docutils literal notranslate"><span class="pre">base58</span></code> is case-sensitive.</p>
</div>
<div class="section" id="what-kind-of-deduplication-is-currently-used">
<h3>4. What kind of deduplication is currently used?<a class="headerlink" href="#what-kind-of-deduplication-is-currently-used" title="Permalink to this headline">Â¶</a></h3>
<p>It is currently only possible to deduplicate between individual versions of a file.
And there also only the portion before the modification.</p>
<p><code class="docutils literal notranslate"><span class="pre">IPFS</span></code> implements deduplication, but it is circumvented by encrypting blocks
before giving them over to the backend. Implementing a more proper and informed
deduplication is one of the long term goals, which require more thorough
interaction with <code class="docutils literal notranslate"><span class="pre">IPFS</span></code>. It is also possible to do some basic deduplication
purely on <code class="docutils literal notranslate"><span class="pre">brig</span></code> side since we have more info on the file than <code class="docutils literal notranslate"><span class="pre">IPFS</span></code> has.</p>
</div>
<div class="section" id="how-fast-is-the-i-o-when-using-brig">
<h3>5. How fast is the I/O when using <code class="docutils literal notranslate"><span class="pre">brig</span></code>?<a class="headerlink" href="#how-fast-is-the-i-o-when-using-brig" title="Permalink to this headline">Â¶</a></h3>
<p>Here are some rather outdated graphs where you can get a rough feeling how fast
it can be. There are a few rules of thumb with mostly obvious content:</p>
<ul class="simple">
<li>It it goes over the network, itâ€™s the network speed plus a smaller constant overhead.</li>
<li>If it comes over FUSE, it is quite a bit slower than over <code class="docutils literal notranslate"><span class="pre">brig</span> <span class="pre">cat</span></code>.</li>
<li>If you do not use compression, writing and reading will be faster.</li>
</ul>
<p>The graphs below only measure in-memory performance compared to a <code class="docutils literal notranslate"><span class="pre">dd</span></code> like
speed (see the Â»baselineÂ« line).</p>
<a class="reference internal image-reference" href="_images/movie_read.svg"><img alt="_images/movie_read.svg" src="_images/movie_read.svg" width="66%" /></a>
<a class="reference internal image-reference" href="_images/movie_write.svg"><img alt="_images/movie_write.svg" src="_images/movie_write.svg" width="66%" /></a>
<p>Your mileage may vary and you better do your own benchmarks for now.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Explain/Update those graphs.</p>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Chris Pahl.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>